<?xml version="1.0" encoding="UTF-8"?>
<sequence name="SendFileSequence" trace="disable" xmlns="http://ws.apache.org/ns/synapse">
    <log description="prepareToSendLog">
        <property name="message" value="Sending payload to CoParticipacaoWS:"/>
    </log>
    <payloadFactory description="createPayload" media-type="xml">
        <format>
            <cop:CoParticipacaoRequest xmlns:cop="http://qualicorp.spread.com.br/WebService/CoParticipacao">
                <cop:fileName>$1</cop:fileName>
                <cop:filePath>$2</cop:filePath>
            </cop:CoParticipacaoRequest>
        </format>
        <args>
            <arg evaluator="xml" expression="get-property('fileName')"/>
            <arg evaluator="xml" expression="get-property('filePath')"/>
        </args>
    </payloadFactory>
    <log description="logPayload" level="full"/>
    <send>
        <endpoint>
            <address format="soap11" uri="http://localhost:8080/CoParticipacaoWebService/ws/coparticipacao.wsdl"/>
        </endpoint>
    </send>
</sequence>
